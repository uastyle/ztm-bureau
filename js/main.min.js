!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Wall=t():e.Wall=t()}(this,function(){return r={},i.m=n=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=document.createElement("div"),r=(t.hasTransform3d="WebkitPerspective"in i.style||"MozPerspective"in i.style||"msPerspective"in i.style||"OPerspective"in i.style||"perspective"in i.style,t.transformProp=function(){if(!("transform"in i.style)){var e=["Webkit","Moz","ms"];for(var t in e)if(e[t]+"Transform"in i.style)return e[t]+"Transform"}return"transform"}(),t.mousewheelEvent="onmousewheel"in document?"mousewheel":"DOMMouseScroll",t.rAF=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},t.cAF=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){clearTimeout(e)},t.getScreenWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},t.getScreenHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},t.maxScreen=function(e){e.style.position="absolute",e.style.top=0,e.style.right=0,e.style.bottom=0,e.style.left=0},t.isScrollable=function(e){var t=e.scrollHeight;return e.clientHeight<t},t.scrollTouchBottom=function(e){var t=e.scrollTop;return e.scrollHeight-t<=e.clientHeight},t.scrollTouchTop=function(e){return 0===e.scrollTop},t.touchEvent={touchStart:"touchstart",touchMove:"touchmove"});window.navigator.msPointerEnabled?(r.touchStart="MSPointerDown",r.touchMove="MSPointerMove"):window.navigator.pointerEnabled&&(r.touchStart="pointerdown",r.touchMove="pointermove")},function(e,t,n){"use strict";var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=f(["wrapper"],["wrapper"]),o=f(["sections"],["sections"]),c=n(2),a=n(0),u=n(3),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(5));function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function d(e){return Array.isArray(e)?e:Array.from(e)}function f(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n(6);var p="section",S="slide",v="data-wall",m=v+"-animate-duration",y=v+"-section-index",w=v+"-section-nav-index",g=v+"-slide",A=v+"-origin",_={wrapperZIndex:1,sectionAnimateDuration:1,easeFunction:"easeIn",loopToBottom:!1,loopToTop:!1,sectionNavItemActiveClass:"active",animatingClass:"animating",currentClass:"current"},T=document.getElementsByTagName("html")[0],b=document.getElementsByTagName("body")[0],E=(i(k,[{key:"_init",value:function(){var e=this;this._refresh(!0),window.addEventListener("resize",function(){e._setupSize()._cssWrapper()}),document.addEventListener("keydown",this._handleKeyDown.bind(this))}},{key:"_refresh",value:function(e){var t=this;e&&this._setupSize()._cssHtmlAndBody()._cssWrapper()._setupSections()._cssSections()._queue(this.sections)._setupSlides()._setupSectionNav(),(0,a.cAF)(this.requestId),(this.isAnimating=!1,c.removeClass)(this.currentSection,this.options.animatingClass),this.sections.forEach(function(e){return(0,c.removeClass)(e,t.options.currentClass)});var n=d(this.sections);this.currentSection=n[0],this.restSections=n.slice(1),(0,c.addClass)(this.currentSection,this.options.currentClass),this.currentSlides.length&&this.currentSlide&&((0,c.removeClass)(this.currentSlide,this.options.animatingClass),this.currentSlides.forEach(function(e){return(0,c.removeClass)(e,t.options.currentClass)}));var i=d(this.currentSlides);return this.currentSlide=i[0],this.restSlides=i.slice(1),this.currentSlides.length&&this.currentSlide&&(0,c.addClass)(this.currentSlide,this.options.currentClass),this._renderSectionNavs(),this._lazyload(this.currentSection),this.wrapper.setAttribute("data-wall-current-section",this._getCurrentSectionIndex()),this}},{key:"_setupSize",value:function(){return this.size.X=(0,a.getScreenWidth)(),this.size.Y=(0,a.getScreenHeight)(),this}},{key:"_setupSections",value:function(){var n=this,e=d(this.sections);return this.currentSection=e[0],this.restSections=e.slice(1),this.sections.forEach(function(e,t){e.setAttribute(y,t+1),e.addEventListener(a.mousewheelEvent,n._handleWheelEvent.bind(n)),(0,u.handleTouch)(e,n)}),this}},{key:"_handleKeyDown",value:function(e){switch(e.keyCode){case 34:case 40:(0,a.scrollTouchBottom)(this.currentSection)&&this.nextSection();break;case 33:case 38:(0,a.scrollTouchTop)(this.currentSection)&&this.prevSection();break;case 37:this.currentSlide&&this.prevSlide();break;case 39:this.currentSlide&&this.nextSlide();break;case 36:this.goToSection(1);break;case 35:this.goToSection(this.sections.length)}}},{key:"_handleWheelEvent",value:function(e){var t=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return(0,a.scrollTouchBottom)(this.currentSection)&&-1===t&&this.nextSection(),(0,a.scrollTouchTop)(this.currentSection)&&1===t&&this.prevSection(),this}},{key:"_setupSectionNav",value:function(){var n=this;return this.navElements&&this.navElements.length&&this.navElements.forEach(function(e){e.style.zIndex=n.options.wrapperZIndex+1,(0,c.toArray)(e.children).forEach(function(e,t){e.setAttribute(w,t+1),e.addEventListener("click",function(){n.goToSection(e.getAttribute(w))})})}),this}},{key:"_setupSlides",value:function(){return this.currentSlides=(0,c.toArray)(this.currentSection.querySelectorAll("["+g+"]")),this.sections.forEach(function(e){var t=(0,c.toArray)(e.querySelectorAll("["+g+"]")),n=(0,c.toArray)(e.querySelectorAll("[data-wall-slide-arrow]"));t.length&&(t.forEach(function(e,t){(0,a.maxScreen)(e),e.style.overflowX="hidden",e.style.overflowY="auto",e.setAttribute("data-wall-slide-index",t+1)}),t.reverse().forEach(function(e,t){return e.style.zIndex=t+1}),n.length&&n.forEach(function(e){return e.style.zIndex=t.length+1}))}),this}},{key:"_cssHtmlAndBody",value:function(){return T.style.height="100%",T.style.overflow="hidden",b.style.height="100%",b.style.position="relative",b.style.margin=0,b.style.overflow="hidden",this}},{key:"_cssWrapper",value:function(){return this.wrapper.style.position="relative",this.wrapper.style.height="100%",this.wrapper.style.zIndex=this.options.wrapperZIndex,this}},{key:"_cssSections",value:function(){var t=this;return this.sections.forEach(function(e){(0,a.maxScreen)(e),e.style.height=t.size.Y+"px",e.style.overflowX="hidden",e.style.overflowY="auto"}),this}},{key:"_lazyload",value:function(e){(0,c.toArray)(e.querySelectorAll("["+A+"]")).forEach(function(e){return e.setAttribute("src",e.getAttribute(A))})}},{key:"_queue",value:function(e){var t=this;return e.reverse().forEach(function(e,t){e.style.zIndex=t+1}),e.reverse(),e.forEach(function(e){return t._renderSectionPosition(e,0)}),this}},{key:"_resetCurrentSlides",value:function(){var e=d(this.sections);this.currentSection=e[0],this.restSections=e.slice(1),this.currentSlides=(0,c.toArray)(this.currentSection.querySelectorAll("["+g+"]")).sort(function(e,t){return t.style.zIndex-e.style.zIndex}),this.currentSlide&&(0,c.removeClass)(this.currentSlide,this.options.currentClass);var t=d(this.currentSlides);return this.currentSlide=t[0],this.restSlides=t.slice(1),this.currentSlide&&(0,c.addClass)(this.currentSlide,this.options.currentClass),this}},{key:"_refreshAnimateStatus",value:function(e){return this.isToBack=e,(0,a.cAF)(this.requestId),this.currentScreenPosition=this.isToBack?100:0,this.isAnimating=!0,this.lastTime=Date.now(),this.screenType===p?(0,c.addClass)(this.currentSection,this.options.animatingClass):this.currentSlide&&this.screenType===S&&(0,c.addClass)(this.currentSlide,this.options.animatingClass),this}},{key:"_animateScreen",value:function(e,t){var n=(Date.now()-this.lastTime)/1e3;return e.style.zIndex=t.length+1,this._updateCurrentScreenPosition(n)._renderSectionPosition(e,this.currentScreenPosition),99.9<this.currentScreenPosition&&!this.isToBack||this.currentScreenPosition<.1&&this.isToBack?(this._refresh()._queue(t),this.screenType===p&&this._resetCurrentSlides(),this):this.isAnimating?this.requestId=(0,a.rAF)(this._animateScreen.bind(this,e,t)):void 0}},{key:"_updateCurrentScreenPosition",value:function(e){var t=(this.screenType===p?+this.currentSection.getAttribute(m):+this.currentSlide.getAttribute(m))||this.options.sectionAnimateDuration,n=this.isToBack?0:100;return this.currentScreenPosition=this.easeFunction(e,this.currentScreenPosition,n-this.currentScreenPosition,t),this}},{key:"_renderSectionPosition",value:function(e,t){switch(this.screenType){case p:e.style[a.transformProp]="translate(0, -"+t+"%) "+this.translateZ;break;case S:e.style[a.transformProp]="translate(-"+t+"%, 0) "+this.translateZ}}},{key:"_getCurrentSectionIndex",value:function(){return this.currentSection.getAttribute(y)}},{key:"_renderSectionNavs",value:function(){var i=this;if(this.navElements&&this.navElements.length){var r=this.options.sectionNavItemActiveClass;this.navElements.forEach(function(e){var t=(0,c.toArray)(e.children);t.forEach(function(e){return(0,c.removeClass)(e,r)});var n=t.find(function(e){return e.getAttribute(w)===i._getCurrentSectionIndex()});(0,c.addClass)(n,r)})}}},{key:"prevSection",value:function(){if((this.options.loopToBottom||1!=this._getCurrentSectionIndex())&&!this.isAnimating){var e=d(this.sections.reverse());this.currentSection=e[0],this.restSections=e.slice(1),this.sections=[this.currentSection].concat(h(this.restSections.reverse())),this.screenType=p,this._refreshAnimateStatus(!0)._animateScreen(this.currentSection,this.sections)}}},{key:"nextSection",value:function(){!this.options.loopToTop&&this._getCurrentSectionIndex()==this.sections.length||this.isAnimating||(this.sections=[].concat(h(this.restSections),[this.currentSection]),this.screenType=p,this._refreshAnimateStatus(!1)._animateScreen(this.currentSection,this.sections))}},{key:"goToSection",value:function(t){if(t!==this._getCurrentSectionIndex()&&!this.isAnimating){this.isToBack=t<this._getCurrentSectionIndex(),this.sections=(0,c.toArray)(this.wrapper.children);var e=this.sections.find(function(e){return e.getAttribute(y)==t}),n=this.sections.slice(0,t-1),i=this.sections.slice(t);this.sections=[e].concat(h(i),h(n)),this.isToBack?this.currentSection=e:this._queue(this.sections),this.screenType=p,this._refreshAnimateStatus(this.isToBack)._animateScreen(this.currentSection,this.sections)}}},{key:"prevSlide",value:function(){if(!this.isAnimating){var e=d(this.currentSlides.reverse());this.currentSlide=e[0],this.restSlides=e.slice(1),this.currentSlides=[this.currentSlide].concat(h(this.restSlides.reverse())),this.screenType=S,this._refreshAnimateStatus(!0)._animateScreen(this.currentSlide,this.currentSlides)}}},{key:"nextSlide",value:function(){this.isAnimating||(this.currentSlides=[].concat(h(this.restSlides),[this.currentSlide]),this.screenType=S,this._refreshAnimateStatus(!1)._animateScreen(this.currentSlide,this.currentSlides))}}]),k);function k(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:(0,c.throwNewError)(s),t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:_;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),this.wrapper="string"==typeof e?document.querySelector(e):e,this.sections=this.wrapper.children.length?(0,c.toArray)(this.wrapper.children):(0,c.throwNewError)(o),this.currentSection=null,this.restSections=null,this.currentSlides=null,this.currentSlide=null,this.restSlides=null,this.currentScreenPosition=0,this.translateZ=a.hasTransform3d?"translateZ(0)":"",this.size={X:0,Y:0},this.options=(0,c.merge)(_,t),this.navElements=(0,c.toArray)(document.querySelectorAll("[data-wall-section-nav]")),this.easeFunction="string"==typeof this.options.easeFunction?l[this.options.easeFunction]:this.options.easeFunction,this.lastTime=null,this.requestId=null,this.isAnimating=!1,this.isToBack=!1,this.screenType=p,this._init()}e.exports=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function i(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}t.throwNewError=function(e){throw new Error(e+" is required")},t.toArray=function(e){return Array.prototype.slice.call(e)},t.merge=function(t,n){return Object.keys(n).forEach(function(e){t[e]=n[e]}),t},t.addClass=function(e,t){e.classList?e.classList.add(t):i(e,t)||(e.className+=" "+t)},t.removeClass=function(e,t){if(e.classList)e.classList.remove(t);else if(i(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}},function(e,t,n){"use strict";var i,r=n(4),s=(i=r)&&i.__esModule?i:{default:i};e.exports={handleTouch:s.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);t.default=function(r,s){var o={X:0,Y:0},c={X:0,Y:0};r.addEventListener(a.touchEvent.touchStart,function(e){var t=e.touches?e.touches[0]:e;o.X=t.pageX,o.Y=t.pageY},!1),r.addEventListener(a.touchEvent.touchMove,function(e){if(!s.isAnimating){var t=e.touches?e.touches[0]:e;c.X=t.pageX,c.Y=t.pageY;var n=o.X-c.X,i=o.Y-c.Y;if(0<Math.abs(i)-Math.abs(n)){if(200<i&&(0,a.scrollTouchBottom)(r))return s.nextSection();if(-200<i&&i<0&&(0,a.scrollTouchTop)(r))return s.prevSection()}else if(s.currentSlide){if(200<n)return s.nextSlide();if(-200<n&&n<0)return s.prevSlide()}}},!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.linear=function(e,t,n,i){return n*e/i+t},t.easeIn=function(e,t,n,i){return n*Math.pow(2,10*(e/i-1))+t},t.easeOut=function(e,t,n,i){return n*(1-Math.pow(2,-10*e/i))+t},t.easeInOut=function(e,t,n,i){return(e/=i/2)<1?n/2*Math.pow(2,10*(e-1))+t:(e--,n/2*(2-Math.pow(2,-10*e))+t)}},function(e,t,n){"use strict";Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,r=arguments[1],s=0;s<i;s++)if(t=n[s],e.call(r,t,s,n))return t})}],i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1);function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var n,r});
//# sourceMappingURL=main.min.js.map
